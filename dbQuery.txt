
CREATE TABLE user (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    user_name VARCHAR(50) NOT NULL UNIQUE,
    hashed_password VARCHAR(64) NOT NULL
);

CREATE TABLE book (
    book_id INT AUTO_INCREMENT PRIMARY KEY,
    book_title VARCHAR(255) NOT NULL,
    author_name VARCHAR(255),
    format VARCHAR(10) NOT NULL,
    file_path VARCHAR(500) NOT NULL,
    publish_date VARCHAR(20),
    uploader_id INT NOT NULL,
    FOREIGN KEY (uploader_id) REFERENCES user(user_id)
);

CREATE TABLE user_books (
    user_id INT NOT NULL,
    book_id INT NOT NULL,
    reading_progress FLOAT NOT NULL DEFAULT 0.0,
    date_added VARCHAR(20) NOT NULL,
    PRIMARY KEY (user_id, book_id),
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (book_id) REFERENCES book(book_id)
);

CREATE TABLE bookmark (
    bookmark_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    book_id INT NOT NULL,
    location_data TEXT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (book_id) REFERENCES book(book_id)
);